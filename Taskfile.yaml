version: 3

tasks:
  start:
    desc: "Run the SSO service"
    cmds:
      - go run ./cmd/sso/main.go --config=./config/local.yaml

  migrate:up:
    desc: "Run the database migrations up"
    cmds:
      - go run ./cmd/migrator/main.go --storage-path=./storage/sso.db --migrations-path=./migrations
  
  test_migrate:up:
    desc: "Run the database migrations up for tests"
    cmds:
      - go run ./cmd/migrator/main.go --storage-path=./storage/sso.db --migrations-path=./tests/migrations --migrations-table=migrations_test
